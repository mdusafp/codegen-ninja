// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ğŸ¯
model Bujinkan {
  id      Int      @id @default(autoincrement())
  lessons Lesson[]
  name    String
}

// ğŸ¥·Ûª
model Sensei {
  id      Int      @id @default(autoincrement())
  lessons Lesson[]
  name    String
}

// ğŸ‘¨â€ğŸ“
model Padowan {
  id      Int               @id @default(autoincrement())
  lessons PadowanToLesson[]
  name    String
}

// âœï¸
model Lesson {
  id         Int               @id @default(autoincrement())
  bujinkanId Int
  bujinkan   Bujinkan          @relation(fields: [bujinkanId], references: [id])
  lessonTime DateTime
  padowans   PadowanToLesson[]
  subject    Subject
  sensei     Sensei            @relation(fields: [senseiId], references: [id])
  senseiId   Int
}

model PadowanToLesson {
  lesson     Lesson   @relation(fields: [lessonId], references: [id])
  assignedAt DateTime @default(now())
  lessonId   Int
  padowan    Padowan  @relation(fields: [padowanId], references: [id])
  padowanId  Int

  @@id([padowanId, lessonId])
}

// ğŸ“š
enum Subject {
  Diversion // ğŸ’£
  Escape // ğŸƒ
  HandFight // ğŸ‘Š
  Hiding // ğŸŒ˜
  InfoGathering // ğŸ¦»
  Masking // ğŸ­
  Assasination // ğŸ—¡ï¸
}
